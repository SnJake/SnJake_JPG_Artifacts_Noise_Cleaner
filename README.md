# JPG & Noise Remover for ComfyUI

![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)
![Python Version](https://img.shields.io/badge/python-3.10+-blue.svg)
![Made for ComfyUI](https://img.shields.io/badge/Made%20for-ComfyUI-blueviolet)

This is a custom node for ComfyUI designed to remove JPEG compression artifacts and digital noise from images. It is powered by a lightweight `UNetRestorer` model that efficiently restores image quality.

![Node Preview](https://i.imgur.com/your-preview-image.png)
*(It is recommended to replace this link with a GIF demonstrating the node's before/after effect)*

---

# About this project
This project is a personal experiment created out of curiosity. The main part of the code was generated by an AI assistant, and my task was to set the goal, prepare the data, run the training and evaluate the result. The model is trained to remove artifacts from images (JPEG, noise) and even shows good quality.

---

## ðŸš€ Installation

The installation consists of two steps: installing the node itself and downloading the model weights.

### Step 1: Install the Node

1.  Open a terminal or command prompt.
2.  Navigate to the `custom_nodes` directory of your ComfyUI installation.
    ```bash
    # Example for Windows
    cd D:\ComfyUI\custom_nodes\
    
    # Example for Linux/macOS
    cd ~/ComfyUI/custom_nodes/
    ```

3.  Clone this repository:
    ```bash
    git clone https://github.com/SnJake/SnJakeArtifactsRemover.git
    ```

### Step 2: Install the Model Weights

1.  Navigate to your `ComfyUI/models/` directory.
2.  Create a folder named `artifacts_remover` inside it, if it doesn't already exist.
3.  Download the model weights file (`.pt` or `.safetensors`) from the **[Hugging Face page (your link here)]()**.
4.  Place the downloaded weights file into the `ComfyUI/models/artifacts_remover/` directory.

### Step 3: Restart

Restart ComfyUI completely. The new node will be available in the "Add Node" menu.

---

## âœ¨ Usage

The node can be found in the "Add Node" menu under **`ðŸ˜Ž SnJake/JPG & Noise Remover`**.

### Inputs

*   **`image`**: The source image to be processed.
*   **`weights_name`**: A dropdown list to select the model weights file from the `models/artifacts_remover` folder.
*   **`weights_path`**: (Optional) A direct path to the weights file if it is located elsewhere.
*   **`base_ch`**: The number of base channels in the model. **This must match the model it was trained with (default is 64)**.
*   **`tile`**: The tile size for processing large images. This helps prevent VRAM shortages. A value of `0` disables tiling. Recommended value: `512`.
*   **`overlap`**: The overlap area between tiles for smoother blending. Recommended value: `64`.
*   **`edge_aware_window`**: Use a smart blending window that avoids darkening the edges of the image where there are no adjacent tiles. It is recommended to keep this enabled (`True`).
*   **`blend`**: A factor to blend the result with the original image (from 0.0 to 1.0). Small values (e.g., `0.1`-`0.2`) can help restore very fine details if the model has over-smoothed them. `0.0` means the effect is fully applied.
*   **`amp_dtype`**: The precision for computations (for CUDA). `auto` is the optimal choice.
*   **`device`**: The device for computations (`auto`, `cuda`, `cpu`).

### Outputs

*   **`image`**: The image after artifact and noise removal.

---

## ðŸ“œ License

This project is licensed under the MIT License. See the [[LICENSE](LICENSE)](https://github.com/SnJake/JPG-Artifacts-Noise-Cleaner/blob/main/LICENSE.md) file for details.
